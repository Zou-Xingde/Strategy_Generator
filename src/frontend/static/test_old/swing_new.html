{% extends "base.html" %}

{% block content %}
<div class="app-container">
    {% include "components/toolbar.html" %}
    
    <!-- 主要內容區域 -->
    <main class="main-content" role="main">
        <!-- 圖表容器 -->
        <div class="chart-section">
            <div class="chart-container" role="img" aria-label="交易圖表">
                <div id="chart" class="trading-chart"></div>
            </div>
        </div>
    </main>
    
    <!-- 底部狀態欄 -->
    <footer class="status-bar" role="status" aria-live="polite">
        <div class="status-left">
            <span id="connection-status" class="status-indicator">🟢 已連接</span>
        </div>
        <div class="status-center">
            <span id="current-time" class="current-time"></span>
        </div>
        <div class="status-right">
            <span id="data-count">數據量: -</span>
            <span class="separator">|</span>
            <span id="generation-status">就緒</span>
        </div>
    </footer>
</div>

<!-- 參數設置彈出視窗 -->
<div class="params-popup" id="params-popup" role="dialog" aria-labelledby="params-title" aria-hidden="true">
    <div class="params-dialog">
        <div class="params-header">
            <h3 id="params-title">參數設置</h3>
            <button class="close-btn" id="close-params" aria-label="關閉參數設置">&times;</button>
        </div>
        <div class="params-content">
            <form id="params-form" class="params-form">
                <div class="params-form-group">
                    <label for="deviation-param">Deviation (%)</label>
                    <input type="number" id="deviation-param" name="deviation" value="12" min="1" max="100" step="0.1" aria-describedby="deviation-help">
                    <small id="deviation-help">ZigZag偏差百分比</small>
                </div>
                <div class="params-form-group">
                    <label for="depth-param">Depth</label>
                    <input type="number" id="depth-param" name="depth" value="12" min="1" max="100" step="1" aria-describedby="depth-help">
                    <small id="depth-help">回溯深度</small>
                </div>
                <div class="params-form-group">
                    <label for="backstep-param">Backstep</label>
                    <input type="number" id="backstep-param" name="backstep" value="3" min="1" max="50" step="1" aria-describedby="backstep-help">
                    <small id="backstep-help">回退步數</small>
                </div>
            </form>
        </div>
        <div class="params-actions">
            <button class="popup-btn cancel-btn" id="cancel-params" type="button">取消</button>
            <button class="popup-btn confirm-btn" id="confirm-params" type="submit">確認</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/swing.js?v={{ cache_buster }}"></script>
{% endblock %}
