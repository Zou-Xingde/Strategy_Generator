{% extends "base.html" %}

{% block content %}
<div class="app-container">
    {% include "components/toolbar.html" %}
    
    <!-- ä¸»è¦å…§å®¹å€åŸŸ -->
    <main class="main-content" role="main">
        <!-- åœ–è¡¨å®¹å™¨ -->
        <div class="chart-section">
            <div class="chart-container" role="img" aria-label="äº¤æ˜“åœ–è¡¨">
                <div id="chart" class="trading-chart"></div>
            </div>
        </div>
    </main>
    
    <!-- åº•éƒ¨ç‹€æ…‹æ¬„ -->
    <footer class="status-bar" role="status" aria-live="polite">
        <div class="status-left">
            <span id="connection-status" class="status-indicator">ğŸŸ¢ å·²é€£æ¥</span>
        </div>
        <div class="status-center">
            <span id="current-time" class="current-time"></span>
        </div>
        <div class="status-right">
            <span id="data-count">æ•¸æ“šé‡: -</span>
            <span class="separator">|</span>
            <span id="generation-status">å°±ç·’</span>
        </div>
    </footer>
</div>

<!-- åƒæ•¸è¨­ç½®å½ˆå‡ºè¦–çª— -->
<div class="params-popup" id="params-popup" role="dialog" aria-labelledby="params-title" aria-hidden="true">
    <div class="params-dialog">
        <div class="params-header">
            <h3 id="params-title">åƒæ•¸è¨­ç½®</h3>
            <button class="close-btn" id="close-params" aria-label="é—œé–‰åƒæ•¸è¨­ç½®">&times;</button>
        </div>
        <div class="params-content">
            <form id="params-form" class="params-form">
                <div class="params-form-group">
                    <label for="deviation-param">Deviation (%)</label>
                    <input type="number" id="deviation-param" name="deviation" value="12" min="1" max="100" step="0.1" aria-describedby="deviation-help">
                    <small id="deviation-help">ZigZagåå·®ç™¾åˆ†æ¯”</small>
                </div>
                <div class="params-form-group">
                    <label for="depth-param">Depth</label>
                    <input type="number" id="depth-param" name="depth" value="12" min="1" max="100" step="1" aria-describedby="depth-help">
                    <small id="depth-help">å›æº¯æ·±åº¦</small>
                </div>
                <div class="params-form-group">
                    <label for="backstep-param">Backstep</label>
                    <input type="number" id="backstep-param" name="backstep" value="3" min="1" max="50" step="1" aria-describedby="backstep-help">
                    <small id="backstep-help">å›é€€æ­¥æ•¸</small>
                </div>
            </form>
        </div>
        <div class="params-actions">
            <button class="popup-btn cancel-btn" id="cancel-params" type="button">å–æ¶ˆ</button>
            <button class="popup-btn confirm-btn" id="confirm-params" type="submit">ç¢ºèª</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/swing.js?v={{ cache_buster }}"></script>
{% endblock %}
