<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Swing - 市場波段規律分析系統</title>
    <link rel="stylesheet" href="/static/style.css?v=1.9">
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body class="market-swing-theme">
    <!-- 主工具欄 -->
    <div class="main-toolbar">
        <div class="toolbar-section">
            <div class="timeframe-buttons">
                <button class="tf-btn" data-timeframe="M1">M1</button>
                <button class="tf-btn" data-timeframe="M5">M5</button>
                <button class="tf-btn" data-timeframe="M15">M15</button>
                <button class="tf-btn" data-timeframe="M30">M30</button>
                <button class="tf-btn" data-timeframe="H1">H1</button>
                <button class="tf-btn" data-timeframe="H4">H4</button>
                <button class="tf-btn active" data-timeframe="D1">D1</button>
                <button class="tf-btn" data-timeframe="W1">W1</button>
                <button class="tf-btn" data-timeframe="MN">MN</button>
            </div>
        </div>
        
        <div class="toolbar-section">
            <button class="tool-btn" id="zoom-in" title="放大">+</button>
            <button class="tool-btn" id="zoom-out" title="縮小">-</button>
            <button class="tool-btn" id="zoom-reset" title="重置縮放">🔄</button>
            <div class="separator"></div>
            <button class="tool-btn" id="crosshair" title="十字線">✚</button>
            <button class="tool-btn" id="measure" title="測量工具">📏</button>
            <div class="separator"></div>
            <button class="tool-btn" id="fullscreen" title="全屏">⛶</button>
        </div>
    </div>

    <!-- 主要內容區域 -->
    <div class="main-content">
        <!-- 圖表區域 -->
        <div class="chart-area">
            <!-- 圖表標題欄 -->
            <div class="chart-header">
                <span class="chart-title">US30Cash,D1</span>
                <div class="chart-info">
                    <span id="price-info">價格: 44205.25</span>
                    <span class="separator">|</span>
                    <span id="time-info">2024/01/15 02:15:30</span>
                </div>
            </div>
            
            <!-- 主圖表容器 -->
            <div class="main-chart-container">
                <div id="main-chart"></div>
            </div>
        </div>
    </div>

    <!-- 測量結果懸浮視窗 -->
    <div id="measurement-popup" class="measurement-popup" style="display: none;">
        <div class="measurement-header">
            <span class="measurement-title">📏 測量結果</span>
            <button class="measurement-close" onclick="closeMeasurementPopup()">×</button>
        </div>
        <div class="measurement-content">
            <div class="measurement-item">
                <span class="measurement-label">價格差:</span>
                <span id="measurement-price-diff" class="measurement-value">0.00</span>
            </div>
            <div class="measurement-item">
                <span class="measurement-label">變化率:</span>
                <span id="measurement-change-percent" class="measurement-value">0.00%</span>
            </div>
            <div class="measurement-item">
                <span class="measurement-label">時間差:</span>
                <span id="measurement-time-diff" class="measurement-value">0小時</span>
            </div>
            <div class="measurement-item">
                <span class="measurement-label">方向:</span>
                <span id="measurement-direction" class="measurement-value">-</span>
            </div>
        </div>
        <div class="measurement-actions">
            <button class="measurement-btn measurement-btn-clear" onclick="clearMeasurementAndClose()">清除測量</button>
            <button class="measurement-btn measurement-btn-keep" onclick="keepMeasurementAndClose()">保留測量</button>
        </div>
    </div>

    <!-- 底部狀態欄 -->
    <div class="status-bar">
        <div class="status-left">
            <span id="connection-status">已連接</span>
            <span class="separator">|</span>
            <span id="current-time">2024/01/15 02:15:30</span>
        </div>
        <div class="status-right">
            <span id="latency">延遲: 12ms</span>
            <span class="separator">|</span>
            <span id="data-count">數據量: 1000筆</span>
        </div>
    </div>

    <script src="/static/app.js?v=2.4"></script>
</body>
</html>
    